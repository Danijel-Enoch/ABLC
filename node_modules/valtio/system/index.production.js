System.register(["react","proxy-compare","use-sync-external-store/shim","valtio/vanilla"],function(a){"use strict";var r,i,o,f,b,p,y,h,x,c;return{setters:[function(n){r=n.useRef,i=n.useCallback,o=n.useEffect,f=n.useMemo,b=n.default},function(n){p=n.isChanged,y=n.createProxy},function(n){h=n.default},function(n){x=n.subscribe,c=n.snapshot,a({getVersion:n.getVersion,proxy:n.proxy,ref:n.ref,snapshot:n.snapshot,subscribe:n.subscribe,unstable_buildProxyFunction:n.unstable_buildProxyFunction})}],execute:function(){a("useSnapshot",C);const{use:n}=b,{useSyncExternalStore:v}=h;function C(t,l){const M=l==null?void 0:l.sync,s=r(),u=r();let S=!0;const g=v(i(e=>{const w=x(t,e,M);return e(),w},[t,M]),()=>{const e=c(t,n);try{if(!S&&s.current&&u.current&&!p(s.current,e,u.current,new WeakMap))return s.current}catch{}return e},()=>c(t,n));S=!1;const k=new WeakMap;o(()=>{s.current=g,u.current=k});const P=f(()=>new WeakMap,[]);return y(g,k,P)}}}});
